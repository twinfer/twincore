# WoT Forms Package

This package provides form implementations for W3C Web of Things (WoT) protocol bindings.

## Integration with Benthos Stream Manager

The forms in this package generate Benthos YAML configurations that are compatible with the new Benthos v4 StreamBuilder API used in `internal/api/benthos_stream_manager.go`.

### Form Types

1. **HTTPForm** - Generates HTTP client/server configurations
2. **KafkaForm** - Generates Kafka input/output configurations
3. **MQTTForm** - (To be implemented) Generates MQTT pub/sub configurations

### Generated YAML Structure

Forms generate YAML fragments that can be composed into complete Benthos stream configurations:

```yaml
# Example Kafka input generated by KafkaForm
input:
  kafka:
    addresses: ["localhost:9092"]
    topics: ["things.sensor1.properties.temperature"]
    consumer_group: "twincore-properties-sensor1"
```

### Usage with Stream Manager

The Stream Manager (`SimpleBenthosStreamManager`) expects:
- Input configuration (from forms)
- Processor chain (WoT-specific transformations)
- Output configuration (from forms)

These are composed into a complete stream configuration and applied using `StreamBuilder.SetYAML()`.

### Security Integration

Forms extract security configurations from WoT SecuritySchemes and apply them to the generated Benthos configurations:
- HTTP: Bearer tokens, API keys, Basic auth
- Kafka: SASL PLAIN, SCRAM, OAuth2
- MQTT: Username/password, TLS client certs

### Environment Variables

Forms use environment variable placeholders for sensitive data:
- `${KAFKA_BROKERS}` - Kafka broker addresses
- `${MQTT_BROKER}` - MQTT broker URL
- `${TWINEDGE_BEARER_TOKEN}` - Bearer authentication token
- etc.

This allows secure configuration without embedding credentials in Thing Descriptions.